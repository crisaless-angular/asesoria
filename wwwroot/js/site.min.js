function soloNumeros(n){let t=window.event?n.which:n.keyCode;if(t<48||t>57)return!0}function ValidateIBAN(n){let t=n;t=t.toUpperCase();t=t.trim();t=t.replace(/\s/g,"");let r,u,f,e,i;return t.length!=24?!1:(r=t.substring(0,1),u=t.substring(1,2),f=getnumIBAN(r),e=getnumIBAN(u),i=String(f)+String(e)+t.substring(2),i=i.substring(6)+i.substring(0,6),resto=modulo97(i),resto==1?!0:!1)}function modulo97(n){let i=Math.ceil(n.length/7),t="";for(let r=1;r<=i;r++)t=String(parseFloat(t+n.substr((r-1)*7,7))%97);return t}function getnumIBAN(n){return ls_letras="ABCDEFGHIJKLMNOPQRSTUVWXYZ",ls_letras.search(n)+10}function actualizarFactura(){let n=$(".datatable").DataTable(),t=n.row($(".btn-actualizarFactura").parent().data()).data(),i=t[0];window.location.href="/Facturas/VerEditar?NFactura="+i}function verFactura(n){let t="";$.ajax({type:"POST",url:"/Facturas/VerPdf?Nfactura="+n,beforeSend:function(){},data:null,success:function(n){$("#visor")&&$("#visor").remove();t=`<iframe id='visor' src='${n}' style='width:100%; height:700px;' frameborder='0'></iframe>`;$(".contentIndexmodal").append(t);$("#modalIndex").modal("toggle")},failure:function(n){console.log(n)}})}function GenerarFactura(n,t,i,r,u){$("#crearFactura").find("button").each(function(){$(this).attr("disabled","disabled")});$("#crearFactura").find("select").each(function(){$(this).attr("disabled","disabled")});$("#crearFactura").find("input").each(function(){$(this).attr("disabled","disabled")});u?window.open("/Facturas/GenerarFactura/?Idfactura="+n):$.get("GenerarFacturaPdf/?Idfactura="+n+"&iva="+t+"&TipoFormaPago="+i+"&fechaemision="+r,function(){window.location.href="/Facturas";window.open("/Facturas/GenerarFactura/?Idfactura="+n)})}function GenerarFacturaEditada(n,t,i,r){$.get("GenerarFacturaPdfEditada/?Idfactura="+n+"&iva="+t+"&TipoFormaPago="+i+"&pagada="+r,function(){window.open("/Facturas/GenerarFactura/?Idfactura="+n)})}function ObtenerNumeroFactura(){let n=$(".datatable").DataTable(),t=n.row($(".btn-ObtenerIdCliente").parent().data()).data();return t[0]}function IdiomaTabla(n){$(n).DataTable({language:{decimal:"",emptyTable:"No hay información",info:"Mostrando _START_ a _END_ de _TOTAL_ Entradas",infoEmpty:"Mostrando 0 to 0 of 0 Entradas",infoFiltered:"(Filtrado de _MAX_ total entradas)",infoPostFix:"",thousands:",",lengthMenu:"Mostrar _MENU_ Entradas",loadingRecords:"Cargando...",processing:"Procesando...",search:"Buscar:",zeroRecords:"Sin resultados encontrados",paginate:{first:"Primero",last:"Ultimo",next:"Siguiente",previous:"Anterior"}},responsive:!0})}function empty(n){while(n.firstElementChild)n.firstElementChild.remove()}function correcto(n){Swal.fire({position:"center",icon:"success",title:n,showConfirmButton:!1,timer:1500})}function PuntoPorComa(n){return n.replace(".",",")}function UpperCase(n){return n.toUpperCase()}function CargarClientes(n){$.post("Clientes/ObtenerClientesIndex/",function(t){let u=document.getElementById("IndexdatosClientes"),i="",r=n;$(t).each(function(n,t){i+="<tr>";i+="<td>"+(t.codigO_CONTABILIDAD==null?r:t.codigO_CONTABILIDAD)+"<\/td>";i+="<td>"+(t.nombrE_FISCAL==null?r:t.nombrE_FISCAL)+"<\/td>";i+="<td>"+(t.nombrE_COMERCIAL==null?r:t.nombrE_COMERCIAL)+"<\/td>";i+="<td>"+(t.telefono==null?r:t.telefono)+"<\/td>";i+="<td>"+(t.fax==null?r:t.fax)+"<\/td>";i+="<td>"+(t.movil==null?r:t.movil)+"<\/td>";i+="<td>"+(t.emailprincipal==null?r:t.emailprincipal)+"<\/td>";i+="<td>"+(t.identificacioN_FISCAL==null?r:t.identificacioN_FISCAL)+"<\/td>";i+="<td class='col-md-2'><button class='btn btn-info'>Detalle <span style='font-size: 20px !important';>>>><\/span><\/button><\/td>";i+="<\/tr>"});u.innerHTML=i;IdiomaTabla("#datatableIndexClientes");$("#datatableIndexClientes").DataTable()})}function Getlogotipo(){$.get("../../Public/GetLogotipo/",function(n){document.getElementById("logotipo").src=`${window.location.origin}/images/${n}`})}$(document).ready(function(){$("[name='CrearFactura']").on("click",function(){$(".idcliente").val()===null&&alert("Debe seleccionar un cliente")});$(".datatable tbody").on("click","tr",function(){$(this).hasClass("selected")?$(this).removeClass("selected"):(tabla.$("tr.selected").removeClass("selected"),$(this).addClass("selected"))});$("#GenerarFactura").on("click",function(){Swal.fire({title:"Generar la factrua",text:"Se va a generar la factrua, ¿Los datos son correctos?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Generar"}).then(n=>{n.isConfirmed&&GenerarFactura($("#IdFactura").val(),$("#ivaselect").val(),$("#formapagoselect").val(),$("#fechaEmision").val(),!1)})})});$(".todosclientes").on("click",function(){window.location.href="/Clientes"});